#This file has been auto-generated by i3-config-wizard(1).
# It will not be overwritten, so edit it as you like.
#
# Should you change your keyboard layout some time, delete
# this file and re-run i3-config-wizard(1).
#

# i3 config file (v4)
#
# Please see https://i3wm.org/docs/userguide.html for a complete reference!

# Font for window titles. Will also be used by the bar unless a different font
# is used in the bar {} block below.
font pango:Fira Code 9

# This font is widely installed, provides lots of unicode glyphs, right-to-left
# text rendering and scalability on retina/hidpi displays (thanks to pango).
#font pango:DejaVu Sans Mono 8


# --- WINDOW RULES --- #
# Float JavaFX
#for_window [title="JavaFX"] floating enable resize set 800 600

floating_minimum_size 100 x 100
floating_maximum_size 2630 x 1620

set $float_width 800
set $float_height 800
set $float_maxwidth 2650
set $float_maxheight 1620

for_window [window_role="GtkFileChooserDialog"] floating enable 

for_window [class="Simserver"] resize set $float_width $float_height
for_window [class="Simserver"] move position center

for_window [class="Blueman-manager"] floating enable
for_window [class="Blueman-manager"] resize set $float_width $float_height
for_window [class="Blueman-manager"] border pixel 2
for_window [class="Blueman-manager"] move position center
for_window [class="Blueman-manager"] move position 0 px $top_bar_height px


for_window [class="XTerm"] floating enable
for_window [class="XTerm"] resize set 1 1
for_window [class="XTerm"] move position center 

for_window [class="Simserver"] floating enable resize set 120 120 move absolute position 100 px 100 px

for_window [class="Apvlv" instance="apvlv"] floating enable
for_window [class="Apvlv" instance="apvlv"] resize set $float_maxwidth $float_maxheight
for_window [class="Apvlv" instance="apvlv"] border pixel 2
for_window [class="Apvlv" instance="apvlv"] move position center

for_window [class="Tsim" instance="tsim"] floating enable move absolute position 1800 px 150 px
for_window [class="Tsim" instance="tools"] floating enable move absolute position 1800 px 750 px

for_window [class="Erlang" title="CCHAT"] floating enable move absolute position 1800 px 150 px

for_window [class="amazed-Main" title="A-mazed"] floating enable move absolute position 1800 px 150 px

for_window [class="windowinfo"] floating enable move absolute position 640 px 200 px resize set 1600 100

for_window [class="Ulauncher" title="Ulauncher Preferences"] floating enable move absolute position 480 px 200 px resize set 1600 500

for_window [class="mounted-usb"] floating enable move absolute position 640 px 200 px resize set 1600 800

for_window [class="wifi-menu"] floating enable move absolute position 640 px 200 px resize set 1600 800

for_window [class="yay-update"] floating enable move absolute position 2080 px 50 px resize set 800 200 sticky enable

for_window [title="Turtle!"] floating enable move position center resize set 800 800

for_window [class="floating-terminal"] floating enable move absolute position 640 px $top_bar_height px resize set 1600 800
for_window [class="floating-ranger"] floating enable move absolute position 125 px $top_bar_height px resize set 2630 1000

#Gimp
for_window [class="gimp" title="^Layers - Brushes$"] floating disable
for_window [class="Gimp" title="^Layers - Brushes$"] border pixel 2
for_window [class="Gimp" title="^Layers - Brushes$"] move position right
for_window [class="Gimp" title="^Toolbox - Tool Options$"] move position right

# Workspace rules
for_window [class="TelegramDesktop"] move container to workspace telegram
for_window [class="Codelite"] move container to workspace codelite
for_window [class="Simserver"] move container to workspace codelite
for_window [title="^vimpc$"] move container to workspace vimpc
for_window [class="Brave-browser"] move container to workspace web
for_window [class="Brave-browser"] layout stacked
# for_window [class="Emacs"] move container to workspace work
for_window [class="Spotify"] move container to workspace spotify
for_window [class="Franz"] move container to workspace messaging
for_window [class="Minecraft 1.15.1"] move container to workspace misc

# Scratchpad Settings
for_window [class="scratchpad"] floating enable
for_window [class="scratchpad"] resize set 1800 1200 
for_window [class="scratchpad"] move scratchpad
for_window [class="scratchpad"] border pixel 5
# exec --no-startup-id kitty --class=scratchpad

# Yttrerymdden SSH Settings
# for_window [class="yttressh"] floating enable
# for_window [class="yttressh"] resize set 1800 1200
for_window [class="yttressh"] move to workspace ssh
# for_window [class="yttressh"] border pixel 5
# exec --no-startup-id kitty --class=yttressh ssh -p 50000 frihetskampen.ddns.net

# Before i3 v4.8, we used to recommend this one as the default:
# font -misc-fixed-medium-r-normal--13-120-75-75-C-70-iso10646-1
# The font above is very space-efficient, that is, it looks good, sharp and
# clear in small sizes. However, its unicode glyph coverage is limited, the old
# X core fonts rendering does not support right-to-left and this being a bitmap
# font, it doesn’t scale on retina/hidpi displays.

# Set colors from Xresources
# Change 'color7' and 'color2' to whatever colors you want i3 to use 
# from the generated scheme.
# NOTE: The '#f0f0f0' in the lines below is the color i3 will use if
# it fails to get colors from Xresources.
set_from_resource $fg i3wm.foreground #f0f0f0
set_from_resource $bg i3wm.background #f0f0f0

# class                 border  backgr. text indicator child_border
client.focused          $fg     $bg     $fg  $bg       $fg
client.focused_inactive $bg     $bg     $fg  $bg       $bg
client.unfocused        $bg     $bg     $fg  $bg       $bg
client.urgent           $bg     $bg     $fg  $bg       $bg
client.placeholder      $bg     $bg     $fg  $bg       $bg

client.background       $bg

# Set gaps
set $inner_gaps 20
set $outer_gaps -20
gaps inner $inner_gaps
gaps outer $outer_gaps

# Window borders
new_window pixel 0
#hide_edge_borders both


# --- KEYBINDINGS --- #


set $mod Mod4

# Surface Pen
# bindsym $mod+XF86AudioMicMute exec write_stylus

# Lemontify
bindsym XF86AudioMute exec lemontify -p audio --toggle
bindsym XF86AudioRaiseVolume exec lemontify -p audio -r
bindsym XF86AudioLowerVolume exec lemontify -p audio -r
bindsym XF86MonBrightnessUp exec lemontify -p bcklight --inc
bindsym XF86MonBrightnessDown exec lemontify -p bcklight --dec
bindsym XF86KbdBrightnessUp exec lemontify -p kbdlight --inc
bindsym XF86KbdBrightnessDown exec lemontify -p kbdlight --dec

# Sound
# bindsym XF86AudioMute exec amixer set Master toggle
# bindsym XF86AudioRaiseVolume exec amixer set Master 5+
# bindsym XF86AudioLowerVolume exec amixer set Master 5-
bindsym XF86AudioPlay exec playerctl play-pause

# Screen brightness
# bindsym XF86MonBrightnessUp exec xbacklight -inc 10
# bindsym XF86MonBrightnessDown exec xbacklight -dec 10

# Disable touchpad
bindsym $mod+comma exec synclient TouchpadOff=1
bindsym $mod+period exec synclient TouchpadOff=0

# rofimoji
# bindsym $mod+m exec rofimoji

# take a screenshot of a screen region and copy it to a clipboard
bindsym --release $mod+Shift+p exec /home/carlb/.config/i3/screenshot.sh -s -c
bindcode 124 exec /home/carlb/.config/i3/screenshot.sh -s -c
# bindsym --release Print exec ./screenshot.sh
# take a screenshot of a whole window and copy it to a clipboard
# bindsym --release mod+Print exec "scregcp /home/carlb/pictures/screenshots/"

# this is from a python script. TODO:
# command = "sleep 0.1 && scrot --exec 'xclip -selection c -t image/png < $f' %s " % file
# proc = subprocess.Popen(command + " ".join(additionalArguments), shell=True)

# Lock screen
bindsym $mod+Control+L exec /home/carlb/.config/i3/lockscreen.sh

# Get windowinfo
bindsym $mod+i exec /usr/bin/kitty --hold --class "windowinfo" /home/carlb/.config/i3/windowinfo

# Add wifi-network
bindsym $mod+n exec /usr/bin/kitty --hold --class "wifi-menu" sudo wifi-menu -o

# Toggle trådfri lights
bindsym $mod+m exec /usr/bin/python3 $HOME/.scripts/tools/tradfri.py 192.168.1.21

# Use Mouse+$mod to drag floating windows to their wanted position
floating_modifier $mod

# start a terminal
#bindsym $mod+Return exec i3-sensible-terminal
#bindsym $mod+Return exec st -f "Monaco:size=12"
#bindsym $mod+Return exec konsole
bindsym $mod+Return exec kitty


# kill focused window
bindsym $mod+Shift+q kill

# get rid of shit
#bindsym $mod+m shit show;

# scratchpad keybinds
# polybar/bar/topbar/height + bar/topbar/offset-y 0 + $inner_gaps + $outer_gaps
set $top_bar_height 35
# bindsym $mod+u [class="floating-terminal"] scratchpad show
bindsym $mod+u exec /home/carlb/.config/i3/floating-terminal.sh
bindsym $mod+shift+f exec /home/carlb/.config/i3/floating-ranger.sh

# bindsym $mod+u exec tdrop -n 1 -a -w 100% -y $top_bar_height --name scratchpad kitty
bindsym $mod+y exec /home/carlb/.scripts/tools/yttressh
# bindsym $mod+shift+f exec tdrop -n 3 -a -w 100% -h 40% -y $top_bar_height --name ranger -f 'ranger' kitty
# bindsym $mod+shift+d exec tdrop -n 4 -a -w 100% -y $top_bar_height --name lf -f 'lf' kitty

bindsym $mod+d exec albert toggle
# bindsym $mod+d exec albert toggle
# bindsym $mod+d exec dmenu_run

# switch to workspace
bindsym $mod+section exec workspacer set 
bindsym $mod+Control+section exec workspacer swap
bindsym $mod+Shift+section exec workspacer move

# show focus
bindsym $mod+minus exec i3-msg border pixel 2
bindsym --release $mod+minus exec i3-msg border pixel 0

# change focus
bindsym $mod+h exec i3-msg border pixel 1; focus left; exec --no-startup-id xdotool mousemove 10000 10000
bindsym $mod+j exec i3-msg border pixel 1; focus down; exec --no-startup-id xdotool mousemove 10000 10000
bindsym $mod+k exec i3-msg border pixel 1; focus up; exec --no-startup-id xdotool mousemove 10000 10000
bindsym $mod+l exec i3-msg border pixel 1; focus right; exec --no-startup-id xdotool mousemove 10000 10000
bindsym --release $mod+h exec i3-msg border pixel 0
bindsym --release $mod+j exec i3-msg border pixel 0
bindsym --release $mod+k exec i3-msg border pixel 0
bindsym --release $mod+l exec i3-msg border pixel 0

# alternatively, you can use the cursor keys:
bindsym $mod+Left focus left
bindsym $mod+Down focus down
bindsym $mod+Up focus up
bindsym $mod+Right focus right

# move focused window
bindsym $mod+Shift+h exec i3-msg border pixel 2; move left
bindsym $mod+Shift+j exec i3-msg border pixel 2; move down
bindsym $mod+Shift+k exec i3-msg border pixel 2; move up
bindsym $mod+Shift+l exec i3-msg border pixel 2; move right
bindsym --release $mod+Shift+h exec i3-msg border pixel 0
bindsym --release $mod+Shift+j exec i3-msg border pixel 0
bindsym --release $mod+Shift+k exec i3-msg border pixel 0
bindsym --release $mod+Shift+l exec i3-msg border pixel 0

# split in horizontal orientation - 47 = ö
bindcode $mod+47 split h

# split in vertical orientation
bindsym $mod+v split v

# enter fullscreen mode for the focused container
bindsym $mod+f fullscreen toggle

# change container layout (stacked, tabbed, toggle split)
bindsym $mod+s layout stacking
bindsym $mod+w layout tabbed
bindsym $mod+e layout toggle split

# toggle tiling / floating
bindsym $mod+Shift+space floating toggle

# change focus between tiling / floating windows
bindsym $mod+space focus mode_toggle

# focus the parent container
bindsym $mod+a focus parent

# focus the child container
#bindsym $mod+d focus child

# Cycle through active workspaces
# bindsym $mod+p workspace next
# bindsym $mod+o workspace prev

# workspaces
set $1 work
set $2 web
set $3 misc
set $4 pdf
set $8 logs
set $9 messaging
set $10 spotify

# switch to workspace
bindsym $mod+1 workspace $1
bindsym $mod+2 workspace $2
bindsym $mod+3 workspace $3
bindsym $mod+4 workspace $4
bindsym $mod+5 workspace 5
bindsym $mod+6 workspace 6
bindsym $mod+7 workspace 7
bindsym $mod+8 workspace $8
bindsym $mod+9 workspace $9
bindsym $mod+0 workspace $10

# move focused container to workspace
bindsym $mod+Shift+1 move container to workspace $1
bindsym $mod+Shift+2 move container to workspace $2
bindsym $mod+Shift+3 move container to workspace $3
bindsym $mod+Shift+4 move container to workspace $4
bindsym $mod+Shift+5 move container to workspace 5
bindsym $mod+Shift+6 move container to workspace 6
bindsym $mod+Shift+7 move container to workspace 7
bindsym $mod+Shift+8 move container to workspace $8
bindsym $mod+Shift+9 move container to workspace $9
bindsym $mod+Shift+0 move container to workspace $10

# reload the configuration file
bindsym $mod+Shift+c reload
# restart i3 inplace (preserves your layout/session, can be used to upgrade i3)
bindsym $mod+Shift+r restart
# exit i3 (logs you out of your X session)
bindsym $mod+Shift+e exec "i3-nagbar -t warning -m 'You pressed the exit shortcut. Do you really want to exit i3? This will end your X session.' -b 'Yes, exit i3' 'i3-msg exit'"

# resize floating window to cover tiles
bindsym $mod+plus resize shrink width 10000px; resize grow width 2650px; resize shrink height 10000px; resize grow height 1620px; move position center;

# resize window (you can also use the mouse for that)
mode "resize" {
        # These bindings trigger as soon as you enter the resize mode

        # Pressing left will shrink the window’s width.
        # Pressing right will grow the window’s width.
        # Pressing up will shrink the window’s height.
        # Pressing down will grow the window’s height.
        bindsym h resize shrink width 10 px or 10 ppt
        bindsym j resize grow height 10 px or 10 ppt
        bindsym k resize shrink height 10 px or 10 ppt
        bindsym l resize grow width 10 px or 10 ppt

        # same bindings, but for the arrow keys
        bindsym Left resize shrink width 10 px or 10 ppt
        bindsym Down resize grow height 10 px or 10 ppt
        bindsym Up resize shrink height 10 px or 10 ppt
        bindsym Right resize grow width 10 px or 10 ppt

        # back to normal: Enter or Escape
        bindsym Return mode "default"
        bindsym Escape mode "default"
}

bindsym $mod+r mode "resize"

# Start i3bar to display a workspace bar (plus the system information i3status
# finds out, if available)
#bar {
#        status_command i3status
#}

# -- EXEC -- 
# exec --no-startup-id wal -R
#exec --no-startup-id xrandr --dpi 144
exec --no-startup-id albert # should make this into a service
exec_always --no-startup-id exec feh --bg-scale ~/pictures/wallpapers/daniel-plan-2400x3000-unsplash.jpg
# exec dispwin /home/carlb/.color/icc/surface-srgb.icm
exec --no-startup-id exec picom -bc --unredir-if-possible --xrender-sync-fence --config ~/.config/compton/config
exec_always --no-startup-id $HOME/.config/polybar/launch.sh
#exec --no-startup-id /usr/lib/geoclue-2.0/demos/agent
exec --no-startup-id redshift-gtk
exec --no-startup-id libinput-gestures
exec_always $HOME/.config/i3/loadxmodmap.sh
exec_always setxkbmap `cat .Xkbmap`
exec_always $HOME/.config/i3/loadxmodmap.sh
exec_always xset r rate 180 30
